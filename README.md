# Parol.Runtime

[![NuGet Version](https://img.shields.io/nuget/v/Parol.Runtime)](https://www.nuget.org/packages/Parol.Runtime)
[![NuGet Downloads](https://img.shields.io/nuget/dt/Parol.Runtime)](https://www.nuget.org/packages/Parol.Runtime)
[![CI](https://github.com/jsinger67/parol-dotnet/actions/workflows/ci.yml/badge.svg)](https://github.com/jsinger67/parol-dotnet/actions/workflows/ci.yml)
[![NuGet Publish](https://github.com/jsinger67/parol-dotnet/actions/workflows/nuget-publish.yml/badge.svg)](https://github.com/jsinger67/parol-dotnet/actions/workflows/nuget-publish.yml)

Runtime library for scanners and LL(k) parsers generated by the parol ecosystem in .NET.

## Features

- Scanner runtime types and matching support (`Parol.Runtime.Scanner`)
- LL(k) parser runtime (`LLKParser`) with production prediction
- Semantic action integration via `IUserActions`
- Optional parser-scoped value conversion via `IValueConverter`

## Installation

```bash
dotnet add package Parol.Runtime
```

## Target Framework

- `net10.0`

## Quick Start

```csharp
using Parol.Runtime;
using Parol.Runtime.Scanner;

var states = new DfaState[]
{
    new(new DfaTransition?[] { new(1) }, Array.Empty<AcceptData>()),
    new(new DfaTransition?[0], new[] { new AcceptData(1, 0, new Lookahead.None()) })
};

var dfa = new Dfa(states);
var mode = new ScannerMode("INITIAL", Array.Empty<Transition>(), dfa);
var context = new ScannerContext(new[] { mode });

Func<char, int?> classify = ch => ch == 'a' ? 0 : null;
var matches = new FindMatches("a", 0, context, classify).ToList();

// matches[0].TokenType == 1
```

## API Surface (Core)

- `Parol.Runtime.LLKParser`
- `Parol.Runtime.IUserActions`
- `Parol.Runtime.RuntimeValueConverter`
- `Parol.Runtime.TokenStream`
- `Parol.Runtime.Scanner.FindMatches`

## Building

```bash
dotnet build Parol.Runtime.slnx -c Release
```

## Running Tests

```bash
dotnet test Parol.Runtime.slnx
```

## Release Notes

See [CHANGELOG.md](CHANGELOG.md).

## Contributing

See [CONTRIBUTING.md](CONTRIBUTING.md).
